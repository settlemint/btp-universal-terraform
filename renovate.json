{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": [
    "config:recommended"
  ],
  "labels": [
    "dependencies"
  ],
  "rangeStrategy": "bump",
  "timezone": "UTC",
  "enabledManagers": [
    "terraform",
    "custom.regex"
  ],
  "packageRules": [
    {
      "matchManagers": [
        "terraform"
      ],
      "semanticCommitType": "chore",
      "semanticCommitScope": "deps"
    },
    {
      "matchManagers": [
        "custom.regex"
      ],
      "semanticCommitType": "chore",
      "semanticCommitScope": "helm"
    },
    {
      "matchManagers": [
        "terraform",
        "custom.regex"
      ],
      "matchUpdateTypes": [
        "patch"
      ],
      "automerge": true,
      "automergeType": "branch"
    }
  ],
  "customManagers": [
    {
      "customType": "regex",
      "managerFilePatterns": [
        "/^deps/ingress_tls/variables\\.tf$/"
      ],
      "matchStrings": [
        "variable\\s+\"nginx_chart_version\"[\\s\\S]*?default\\s*=\\s*\"(?<currentValue>[^\"]+)\""
      ],
      "datasourceTemplate": "helm",
      "registryUrlTemplate": "https://kubernetes.github.io/ingress-nginx",
      "packageNameTemplate": "ingress-nginx/ingress-nginx"
    },
    {
      "customType": "regex",
      "managerFilePatterns": [
        "/^deps/ingress_tls/variables\\.tf$/"
      ],
      "matchStrings": [
        "variable\\s+\"cert_manager_chart_version\"[\\s\\S]*?default\\s*=\\s*\"(?<currentValue>[^\"]+)\""
      ],
      "datasourceTemplate": "helm",
      "registryUrlTemplate": "https://charts.jetstack.io",
      "packageNameTemplate": "jetstack/cert-manager"
    },
    {
      "customType": "regex",
      "managerFilePatterns": [
        "/^deps/postgres/variables\\.tf$/"
      ],
      "matchStrings": [
        "variable\\s+\"chart_version\"[\\s\\S]*?default\\s*=\\s*\"(?<currentValue>[^\"]+)\""
      ],
      "datasourceTemplate": "helm",
      "registryUrlTemplate": "https://charts.bitnami.com/bitnami",
      "packageNameTemplate": "bitnami/postgresql"
    },
    {
      "customType": "regex",
      "managerFilePatterns": [
        "/^deps/redis/variables\\.tf$/"
      ],
      "matchStrings": [
        "variable\\s+\"chart_version\"[\\s\\S]*?default\\s*=\\s*\"(?<currentValue>[^\"]+)\""
      ],
      "datasourceTemplate": "helm",
      "registryUrlTemplate": "https://charts.bitnami.com/bitnami",
      "packageNameTemplate": "bitnami/redis"
    },
    {
      "customType": "regex",
      "managerFilePatterns": [
        "/^deps/object_storage/variables\\.tf$/"
      ],
      "matchStrings": [
        "variable\\s+\"chart_version\"[\\s\\S]*?default\\s*=\\s*\"(?<currentValue>[^\"]+)\""
      ],
      "datasourceTemplate": "helm",
      "registryUrlTemplate": "https://charts.bitnami.com/bitnami",
      "packageNameTemplate": "bitnami/minio"
    },
    {
      "customType": "regex",
      "managerFilePatterns": [
        "/^deps/metrics_logs/variables\\.tf$/"
      ],
      "matchStrings": [
        "variable\\s+\"kp_stack_chart_version\"[\\s\\S]*?default\\s*=\\s*\"(?<currentValue>[^\"]+)\""
      ],
      "datasourceTemplate": "helm",
      "registryUrlTemplate": "https://prometheus-community.github.io/helm-charts",
      "packageNameTemplate": "prometheus-community/kube-prometheus-stack"
    },
    {
      "customType": "regex",
      "managerFilePatterns": [
        "/^deps/metrics_logs/variables\\.tf$/"
      ],
      "matchStrings": [
        "variable\\s+\"loki_stack_chart_version\"[\\s\\S]*?default\\s*=\\s*\"(?<currentValue>[^\"]+)\""
      ],
      "datasourceTemplate": "helm",
      "registryUrlTemplate": "https://grafana.github.io/helm-charts",
      "packageNameTemplate": "grafana/loki-stack"
    },
    {
      "customType": "regex",
      "managerFilePatterns": [
        "/^deps/oauth/variables\\.tf$/"
      ],
      "matchStrings": [
        "variable\\s+\"chart_version\"[\\s\\S]*?default\\s*=\\s*\"(?<currentValue>[^\"]+)\""
      ],
      "datasourceTemplate": "helm",
      "registryUrlTemplate": "https://charts.bitnami.com/bitnami",
      "packageNameTemplate": "bitnami/keycloak"
    },
    {
      "customType": "regex",
      "managerFilePatterns": [
        "/^deps/secrets/variables\\.tf$/"
      ],
      "matchStrings": [
        "variable\\s+\"chart_version\"[\\s\\S]*?default\\s*=\\s*\"(?<currentValue>[^\"]+)\""
      ],
      "datasourceTemplate": "helm",
      "registryUrlTemplate": "https://helm.releases.hashicorp.com",
      "packageNameTemplate": "hashicorp/vault"
    }
  ]
}
